# based on https://docs.google.com/spreadsheets/d/1Ve8UzPNpO6zx1Jd4Oy7Wg9o4HZWJ2wSopEOAqxR7H0I/edit?ts=5e2f4842#gid=1747801046

- object: General_Accounting_Unit__c
  nickname: theGAU
  just_once: True
  fields:
    name: The RD GAU
    description__c: ${{fake.paragraph}}

- object: Campaign
  nickname: theCampaign
  just_once: True
  fields:
    name: The ${{fake.word}} Campaign
    IsActive: True

- macro: Standard_RD_Fields
  fields:
    Name: ${{this.id}}
    npe03__Amount__c:
      random_number:
        min: 1
        max: 100
    npe03__Date_Established__c:
      date_between:
        start_date: -800d
        end_date: -14d
    StartDate__c: ${{this.npe03__Date_Established__c}}
    InstallmentFrequency__c: 1
    Status__c: Active
    npe03__Recurring_Donation_Campaign__c:
      random_choice:
        - choice:
            probability: 5%
            pick:
              - reference: theCampaign
        - choice:
            probability: 95%
            pick: ""
    npe03__Contact__c:
      random_choice:
        - choice:
            probability: 98%
            pick:
              - object: Contact
                fields:
                  FirstName:
                    fake: first_name
                  LastName:
                    fake: last_name
                  Email:
                    fake: free_email
                  Phone:
                    fake: phone_number
        - choice:
            probability: 2%
            pick: ""
    npe03__Organization__c:
      if:
        - choice:
            when: ${{not this.npe03__Contact__c}}
            pick:
              - object: Account
                fields:
                  description: Account related to Recurring Donation ${{npe03__Recurring_Donation__c.id}}
                  Name:
                    fake: company
                  Phone:
                    fake: phone_number

  friends:
    - object: __hidden_grouper
      fields:
        __fake_field:
          - random_choice:
            - choice:
                probability: 5%
                pick:
                - object: Allocation__c
                  fields:
                      General_Accounting_Unit__c:
                        reference: theGAU
                      Recurring_Donation__c:
                        reference: npe03__Recurring_Donation__c
                      Percent__c:
                        random_number:
                          min: 1
                          max: 99
            - choice:
                probability: 95%
                pick: ${{None}}

- object: __hidden_grouper
  fields:
    __fake_field:
      - random_choice:
          - choice:
              probability: 18%
              pick:
                - object: npe03__Recurring_Donation__c
                  include: Standard_RD_Fields
                  fields:
                    Name: Open / Monthly / Multiply By - Has a "Day Of Month" value ${{id}}
                    RecurringType__c: Open
                    npe03__Installment_Period__c: Monthly
                    InstallmentFrequency__c: 1
                    Day_of_Month__c:
                      random_number:
                        min: 1
                        max: 30

          - choice:
              probability: 1%
              pick:
                - object: npe03__Recurring_Donation__c
                  include: Standard_RD_Fields
                  fields:
                    Name: Open - Monthly Always Use Last Day = True ${{id}}
                    RecurringType__c: Open
                    npe03__Installment_Period__c: Monthly
                    InstallmentFrequency__c: 1
                    Day_of_Month__c: Last_Day

          - choice:             # Monthly - No DayOfMonth or LastDay
              probability: 52%
              pick:
                - object: npe03__Recurring_Donation__c
                  include: Standard_RD_Fields
                  fields:
                    Name: Open - Monthly / Multiply By - Neither ${{id}}
                    RecurringType__c: Open
                    npe03__Installment_Period__c: Monthly
                    InstallmentFrequency__c: 1
                    Day_of_Month__c:
                      random_number:
                        min: 1
                        max: 30

          - choice:           # Monthly - Has a "Day Of Month" value
              probability: 5%
              pick:
                - object: npe03__Recurring_Donation__c
                  include: Standard_RD_Fields
                  fields:
                    Name: Open - Monthly / Day of Month ${{id}}
                    RecurringType__c: Open
                    npe03__Installment_Period__c: Monthly
                    InstallmentFrequency__c: 1
                    Day_of_Month__c:
                      random_number:
                        min: 1
                        max: 30

          - choice:
              probability: 1%
              pick:
                - object: npe03__Recurring_Donation__c
                  include: Standard_RD_Fields
                  fields:
                    Name: Open / Monthly / LastDayOfMonth
                    RecurringType__c: Open
                    npe03__Installment_Period__c: Monthly
                    InstallmentFrequency__c: 1
                    Day_of_Month__c: Last_Day

          - choice:
              probability: 1%
              pick:
                - object: npe03__Recurring_Donation__c
                  include: Standard_RD_Fields
                  fields:
                    Name: Open / Monthly
                    RecurringType__c: Open
                    npe03__Installment_Period__c: Monthly
                    InstallmentFrequency__c: 1
                    Day_of_Month__c:
                      random_number:
                        min: 1
                        max: 30

          - choice:
              probability: 1%
              pick:
                - object: npe03__Recurring_Donation__c
                  include: Standard_RD_Fields
                  fields:
                    Name: Open / Bi-Weekly ${{id}}
                    RecurringType__c: Open
                    InstallmentFrequency__c: 2
                    npe03__Installment_Period__c: Weekly

          - choice:
              probability: 1%
              pick:
                - object: npe03__Recurring_Donation__c
                  include: Standard_RD_Fields
                  fields:
                    Name: Open / Quarterly ${{id}}
                    RecurringType__c: Open
                    InstallmentFrequency__c: 3
                    npe03__Installment_Period__c: Monthly
                    Day_of_Month__c: 1


          - choice:           # ${{None}} / Monthly
              probability: 18%
              pick:
                - object: npe03__Recurring_Donation__c
                  include: Standard_RD_Fields
                  fields:
                    Name: Open / Monthly
                    RecurringType__c: Open
                    npe03__Installment_Period__c: Monthly
                    InstallmentFrequency__c: 1
                    Day_of_Month__c:
                      random_number:
                        min: 1
                        max: 30

          - choice:
              probability: 1%
              pick:
                - object: npe03__Recurring_Donation__c
                  include: Standard_RD_Fields
                  fields:
                    Name: Fixed / Weekly ${{id}}
                    RecurringType__c: "Fixed"
                    npe03__Installment_Period__c: Weekly
                    InstallmentFrequency__c: 1
                    npe03__Installments__c: 52

          - choice:
              probability: 1%
              pick:
                - object: npe03__Recurring_Donation__c
                  include: Standard_RD_Fields
                  fields:
                    Name: Fixed / Yearly ${{id}}
                    RecurringType__c: Fixed
                    InstallmentFrequency__c: 1
                    npe03__Installment_Period__c: Yearly
                    npe03__Installments__c:
                      random_number:
                        min: 2
                        max: 10

          - choice:
              probability: 1%
              pick:
                - object: npe03__Recurring_Donation__c
                  include: Standard_RD_Fields
                  fields:
                    Name: Closed ${{id}}
                    RecurringType__c: Open
                    Status__c: Closed
                    npe03__Installment_Period__c: Monthly
                    InstallmentFrequency__c: 1
                    Day_of_Month__c:
                      random_number:
                        min: 1
                        max: 30
