<template>

    <template if:true={displayFieldMappings}>

        <c-bdi-field-mapping-modal
            object-mapping={objectMapping}
            is-modal-open={isModalOpen}
            di-field-describes={diFieldDescribes}
            target-object-field-describes={targetObjectFieldDescribes}
            field-mapping-set-name={fieldMappingSetName}>
        </c-bdi-field-mapping-modal>

        <div class="slds-grid slds-wrap slds-m-bottom_small">
            <div class="slds-size_1-of-2">
                <button class="slds-text-title_caps slds-button slds-button_extension-back"
                        onclick={handleNavButton}>
                    Back to Mapping Group
                </button>
            </div>
            <div class="slds-size_1-of-2">
                <lightning-button
                    label="Create New Field Mapping"
                    title="Create New Field Mapping"
                    onclick={handleOpenModal}
                    class="slds-m-left_x-small slds-float_right">
                </lightning-button>
            </div>
            <div class="slds-size_1-of-1 slds-m-top_small slds-m-bottom_large">
                <h1 class="slds-text-heading_medium slds-text-heading_medium_extension slds-m-bottom_x-small">{objectMapping.MasterLabel} Group</h1>
                <h2 class="slds-text-heading_small slds-text-heading_small_extension slds-m-bottom_medium">Field Mappings</h2>

                <p class="slds-text_extension slds-m-bottom_medium">
                    Connect the field you created on the NPSP Data Import object to the field on your target object in
                    the grid below.
                    You can find fields by Field Label or the Field API Name.
                    Fields on the NPSP Data Import object must map to compatible field types on your target object.
                    When you select an NPSP Data Import field, only the compatible target fields will be available.
                </p>

                <p class="slds-text_extension">Find complete Advanced Mapping setup documentation <a href="#">here</a>.</p>
            </div>
            <div class="slds-size_1-of-1 slds-m-vertical_small">
                <div class="slds-grid slds-wrap">
                    <div class="slds-size_4-of-8">
                        <p class="slds-truncate slds-p-bottom_xx-small slds-text-heading_small table-header table-header_source">
                            Source (NPSP Data Import Object)
                        </p>
                    </div>
                    <div class="slds-size_4-of-8">
                        <p class="slds-truncate slds-p-bottom_xx-small slds-text-heading_small table-header table-header_target">
                            Target ({objectMapping.MasterLabel})
                        </p>
                    </div>
                    <div class="slds-size_1-of-1">
                        <tempate if:true={isLoading}>
                            <lightning-spinner></lightning-spinner>
                            <c-stencil row-count="10" column-count="7"></c-stencil>
                        </tempate>
                        <template if:false={isLoading}>
                            <lightning-datatable
                                key-field="id"
                                data={fieldMappings}
                                columns={columns}
                                hide-checkbox-column
                                onrowaction={handleRowAction}>
                            </lightning-datatable>
                            <template if:true={noFieldMappings}>
                                <p class="slds-p-around_medium">
                                    <i>There are no Field Mappings for this Mapping Group yet, </i>
                                    <a href="#" onclick={handleOpenModal}>Create New Field Mapping</a>
                                </p>
                            </template>
                        </template>
                    </div>
                </div>
            </div>
            <template if:false={noFieldMappings}>
                <div class="slds-size_1-of-1 slds-m-top_small">
                    <lightning-button
                        label="Create New Field Mapping"
                        title="Create New Field Mapping"
                        onclick={handleOpenModal}
                        class="slds-m-left_x-small slds-float_right">
                    </lightning-button>
                </div>
            </template>
        </div>
    </template>

</template>