<template>

    <template if:true={hasMessage}>
        <div class="slds-p-around_large" tabindex="-1">
            <div class="desktop forcePageError" aria-live="assertive">
                <div
                    class="slds-notify_container slds-notify_container_extension slds-is-relative slds-m-bottom_xx-small">
                    <div class={notificationClass} role="alert">
                        <span class="slds-icon_container slds-m-right_small slds-no-flex slds-align-top">
                            <lightning-icon icon-name={iconName} class="slds-p-right_small" variant="inverse"
                                size="small">
                            </lightning-icon>
                        </span>

                        <div class="slds-notify__content">
                            <h2 class="slds-text-heading_small ">
                                <lightning-formatted-rich-text value={message.body}></lightning-formatted-rich-text>
                            </h2>
                        </div>

                        <lightning-button-icon icon-name="utility:close" variant="bare-inverse"
                            class="slds-notify__close" size="large" onclick={handleCloseNotification}>
                        </lightning-button-icon>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <div if:true={isViewMode} class="slds-align_absolute-center slds-p-vertical_small slds-m-top_small">
        <lightning-button label={labels.editButtonLabel} onclick={handleButtonClick}
            data-qa-locator="edit-mapping-button">
        </lightning-button>
    </div>

    <lightning-layout multiple-rows="true" vertical-align="start">
        <lightning-layout-item class="slds-p-left_large slds-p-top_medium" size="12">
            <lightning-formatted-rich-text value={labels.mappingIntro}></lightning-formatted-rich-text>
        </lightning-layout-item>

        <lightning-layout-item class="slds-p-left_large slds-p-top_medium" size="12">
            <lightning-formatted-rich-text value={labels.mappingDescriptions}>
            </lightning-formatted-rich-text>
        </lightning-layout-item>

        <lightning-layout-item class="slds-p-left_large slds-p-top_medium slds-p-right_x-large" size="12">
            <template if:true={isViewMode}>
                <lightning-datatable key-field="status" data={records} columns={viewColumns} hide-checkbox-column>
                </lightning-datatable>
            </template>

            <template if:false={isViewMode}>
                <c-custom-datatable key-field="status" data={records} columns={editColumns} hide-checkbox-column
                    class="datatable-container" onpicklistchange={handleStateChange}>
                </c-custom-datatable>
            </template>
        </lightning-layout-item>
    </lightning-layout>

    <div if:false={isViewMode}
        class="slds-align_absolute-center slds-p-vertical_small slds-m-top_large slds-p-bottom_xx-small">
        <lightning-button label={labels.saveButtonLabel} onclick={handleButtonClick} variant="brand"
            data-qa-locator="save-mapping-button">
        </lightning-button>
        <lightning-button label={labels.cancelButtonLabel} onclick={handleButtonClick} class="slds-m-left_x-small"
            data-qa-locator="cancel-edit-mapping-button">
        </lightning-button>
    </div>

</template>